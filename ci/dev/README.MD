# Окружения для разработки

В данной директории есть все необходимое для запуска проекта на компьютере у разработчика.

## Запуск проекта

Перед запуском проекта локально требуется:

- установить docker последней версии по [инструкции](https://docs.docker.com/engine/install/).
- в старых версиях где нет `docker-compose-plugin` также требовалось установить отдельно [docker-compose](https://docs.docker.com/compose/install/)
- скопировать файл с переменными окружения `cp ci/dev/.env.dist ci/dev/.env` и подправить под себя
- скопировать файл `cp ci/dev/docker-compose.override.yml.dist ci/dev/docker-compose.override.yml` позволяющий
  переопределить зафиксированные в git-репозитории значения в `ci/dev/docker-compose.yml`, например указать более
  удобные разработчику номера портов, добавить вывод лога postgres и т.д.

После завершения подготовки, можем запустить проект

- переходим в каталог `ci/dev`
- запускаем проект в фоне `docker-compose up -d`
- иногда требуется выполнить переустановку pip-зависимостей, для этого выполняем `docker-compose up -d --build`

После запуска можно проконтролировать что проект запускается командой `docker-compose ps`.
А еще с помощью команды `docker-compose logs -f [service]` можно увидеть логи из контейнера в сервисе [service] имя
которого указывается в секции `services` файла `ci/dev/docker-compose.yml`.

В веб-браузере проект доступен по следующему url:
- [http://localhost:8000/](http://localhost:8000/)

Также выполнен port forward для

- `postgres` на порту 5432
- `redis` на порту 6379

## Остановка проекта

Для остановки проекта с сохранением данных выполните в директории `ci/dev` команду `docker-compose down`.

Для остановки проекта с полной очисткой данных, выполните в директории `ci/dev` команду `docker-compose down --volumes --remove-orphans`
